{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/lubosjasko/WebstormProjects/openweathermap/pages/search/index.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { FormControl, InputLabel, Input, InputAdornment, IconButton, makeStyles, Typography, Button } from '@material-ui/core';\nimport { useRouter } from 'next/router';\nimport SearchIcon from '@material-ui/icons/Search';\nimport clsx from 'clsx';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    margin: {\n      margin: theme.spacing(1)\n    },\n    withoutLabel: {\n      marginTop: theme.spacing(3)\n    },\n    textField: {\n      width: '25ch'\n    },\n    listRow: {\n      'display': 'flex',\n      'justify-content': 'space-between'\n    }\n  };\n});\n\nvar SearchScreen = function SearchScreen() {\n  _s();\n\n  var router = useRouter();\n  var classes = useStyles();\n\n  var _useState = useState(),\n      Location = _useState[0],\n      SetLocation = _useState[1];\n\n  var _useState2 = useState(),\n      City = _useState2[0],\n      SetCity = _useState2[1];\n\n  var _useState3 = useState(City),\n      LocalCity = _useState3[0],\n      SetLocalCity = _useState3[1];\n\n  var temperature = process.env.units === 'metric' ? '℃' : '℉';\n  var citesId = process.env.cities.toString();\n  var fetchLocations = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(\"\".concat(process.env.apiUrl, \"?id=\").concat(citesId, \"&appid=\").concat(process.env.openApiKey, \"&units=\").concat(process.env.units)).then(function (res) {\n              return res.json();\n            }).then(function (response) {\n              SetCity(response.list);\n              SetLocalCity(response.list);\n            });\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [SetCity, citesId]);\n  useEffect(function () {\n    fetchLocations();\n  }, [fetchLocations]);\n  var handleChange = useCallback(function (event) {\n    SetLocation(event.target.value);\n    SetLocalCity(City.filter(function (city) {\n      return city.name.toLowerCase().includes(event.target.value);\n    }));\n  }, [SetLocation, SetLocalCity, City]);\n  var handleClickDetailWeather = useCallback(function (cityId) {\n    router.push(\"/detail?id=\".concat(cityId), '/detail');\n  }, [router]);\n\n  if (!City) {\n    return __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, __jsx(Typography, {\n    align: \"center\",\n    variant: \"h5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, 'Location'), __jsx(FormControl, {\n    fullWidth: true,\n    className: clsx(classes.margin, classes.textField),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, __jsx(InputLabel, {\n    htmlFor: \"standard-adornment-password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, \"Search city...\"), __jsx(Input, {\n    id: \"location-input\",\n    type: \"text\",\n    value: Location,\n    onChange: handleChange,\n    endAdornment: __jsx(InputAdornment, {\n      position: \"end\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, __jsx(IconButton, {\n      \"aria-label\": \"toggle location visibility\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, __jsx(SearchIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 19\n      }\n    }))),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }))), LocalCity && LocalCity.map(function (city) {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      key: city.name,\n      onClick: function onClick() {\n        return handleClickDetailWeather(city.id);\n      },\n      className: classes.listRow,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, __jsx(Button, {\n      color: \"primary\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }, city.name), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, Math.round(city.main.temp), \" \"), __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, temperature))));\n  }));\n};\n\n_s(SearchScreen, \"AsdnNhIxxhEpNzihbpfZh0Re3+o=\", false, function () {\n  return [useRouter, useStyles];\n});\n\n_c = SearchScreen;\nexport default SearchScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchScreen\");","map":{"version":3,"sources":["/Users/lubosjasko/WebstormProjects/openweathermap/pages/search/index.tsx"],"names":["React","useCallback","useEffect","useState","FormControl","InputLabel","Input","InputAdornment","IconButton","makeStyles","Typography","Button","useRouter","SearchIcon","clsx","useStyles","theme","root","display","flexWrap","margin","spacing","withoutLabel","marginTop","textField","width","listRow","SearchScreen","router","classes","Location","SetLocation","City","SetCity","LocalCity","SetLocalCity","temperature","process","env","units","citesId","cities","toString","fetchLocations","fetch","apiUrl","openApiKey","then","res","json","response","list","handleChange","event","target","value","filter","city","name","toLowerCase","includes","handleClickDetailWeather","cityId","push","map","id","Math","round","main","temp"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect, useState} from 'react'\nimport {FormControl, InputLabel, Input, InputAdornment, IconButton, makeStyles, Typography, Button} from '@material-ui/core'\nimport {useRouter} from 'next/router'\nimport SearchIcon from '@material-ui/icons/Search'\nimport clsx from 'clsx'\nimport {ListResponse} from '../types'\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  margin: {\n    margin: theme.spacing(1),\n  },\n  withoutLabel: {\n    marginTop: theme.spacing(3),\n  },\n  textField: {\n    width: '25ch',\n  },\n  listRow: {\n    'display': 'flex',\n    'justify-content': 'space-between',\n\n  },\n}))\n\nconst SearchScreen = ():JSX.Element => {\n  const router = useRouter()\n\n  const classes = useStyles()\n  const [Location, SetLocation] = useState<ListResponse[]>()\n  const [City, SetCity] = useState<ListResponse[]>()\n  const [LocalCity, SetLocalCity] = useState<ListResponse[]>(City)\n  const temperature = process.env.units === 'metric'? '℃' : '℉'\n  const citesId = process.env.cities.toString()\n\n  const fetchLocations = useCallback(async () => {\n    await fetch(`${process.env.apiUrl}?id=${citesId}&appid=${process.env.openApiKey}&units=${process.env.units}`)\n        .then((res) => res.json())\n        .then((response) => {\n          SetCity(response.list)\n          SetLocalCity(response.list)\n        })\n  }, [SetCity, citesId])\n\n\n  useEffect(() => {\n    fetchLocations()\n  }, [fetchLocations])\n\n  const handleChange = useCallback((event) => {\n    SetLocation(event.target.value)\n    SetLocalCity(City.filter((city) => city.name.toLowerCase().includes(event.target.value)))\n  }, [SetLocation, SetLocalCity, City])\n\n  const handleClickDetailWeather = useCallback((cityId: number)=> {\n    router.push(`/detail?id=${cityId}`, '/detail')\n  }, [router])\n\n\n  if (!City) {\n    return <div>Loading...</div>\n  }\n\n  return (\n    <>\n      <div className={classes.root}>\n        <Typography align=\"center\" variant='h5'>{'Location'}</Typography>\n        <FormControl fullWidth className={clsx(classes.margin, classes.textField)}>\n          <InputLabel htmlFor=\"standard-adornment-password\">Search city...</InputLabel>\n          <Input\n            id=\"location-input\"\n            type='text'\n            value={Location}\n            onChange={handleChange}\n            endAdornment={\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"toggle location visibility\">\n                  <SearchIcon/>\n                </IconButton>\n              </InputAdornment>\n            }\n          />\n        </FormControl>\n      </div>\n      {LocalCity && LocalCity.map((city) => {\n        return (\n          <>\n            <div key={city.name} onClick={() => handleClickDetailWeather(city.id)} className={classes.listRow}>\n              <Button color=\"primary\">{city.name}</Button>\n              <div>\n                <span>{Math.round(city.main.temp)} </span>\n                <span>{temperature}</span>\n              </div>\n            </div>\n          </>\n        )\n      },\n      )}\n    </>\n  )\n}\n\nexport default SearchScreen\n"]},"metadata":{},"sourceType":"module"}